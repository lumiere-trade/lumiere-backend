# Lumiere Port Allocation - Single Source of Truth
#
# Architecture: Each environment uses different container ports
# - Production: 8xxx
# - Development: 9xxx  
# - Test: 7xxx
#
# Docker port mappings are 1:1 (host:container same port)

version: "1.0"
last_updated: "2025-01-20"

# Port allocation by environment
environments:
  production:
    pourtier:
      port: 8000
      mapping: "8000:8000"
    courier:
      port: 8765
      mapping: "8765:8765"
    passeur:
      port: 8766
      mapping: "8766:8766"
      
  development:
    pourtier:
      port: 9000
      mapping: "9000:9000"
    courier:
      port: 9765
      mapping: "9765:9765"
    passeur:
      port: 9766
      mapping: "9766:9766"
      
  test:
    pourtier:
      port: 7000
      mapping: "7000:7000"
    courier:
      port: 7765
      mapping: "7765:7765"
    passeur:
      port: 7766
      mapping: "7766:7766"
    postgres:
      port: 5432
      mapping: "5433:5432"

# Service discovery URLs (Docker DNS)
service_discovery:
  production:
    pourtier: "http://pourtier:8000"
    courier: "http://courier:8765"
    passeur: "http://passeur:8766"
    
  development:
    pourtier: "http://pourtier:9000"
    courier: "http://courier:9765"
    passeur: "http://passeur:9766"
    
  test:
    pourtier: "http://pourtier:7000"
    courier: "http://courier:7765"
    passeur: "http://passeur:7766"

# Infrastructure
infrastructure:
  postgres: 5432
  redis: 6379
  influxdb: 8086
  pypi: 9001

# Health check endpoints
health_endpoints:
  pourtier: "/health"
  courier: "/health"
  passeur: "/health"
