# Passeur Test Configuration

# Bridge server (INTERNAL - Python on 7766 will proxy here)
bridge_host: "127.0.0.1"
bridge_port: 7768

# Python FastAPI (external API)
api_host: "0.0.0.0"
api_port: 7766

# Service Discovery (Docker DNS)
courier_url: "http://courier:7765"
pourtier_url: "http://pourtier:7000"

# Connection settings (fast for tests)
heartbeat_interval: 5
request_timeout: 10

# Logging
log_level: "debug"

# Blockchain
solana_network: "devnet"

# Resilience - Circuit Breakers (permissive for tests)
resilience:
  circuit_breakers:
    solana_rpc:
      failure_threshold: 10
      success_threshold: 2
      timeout: 30.0
    bridge_server:
      failure_threshold: 10
      success_threshold: 2
      timeout: 60.0

  # Retry patterns (fast for tests)
  retry:
    transaction_submission:
      max_attempts: 2
      initial_delay: 0.1
      max_delay: 2.0
      backoff_multiplier: 2.0
      jitter: false
    rpc_query:
      max_attempts: 3
      initial_delay: 0.1
      max_delay: 2.0
      backoff_multiplier: 2.0
      jitter: false

  # Timeouts (short for tests)
  timeouts:
    rpc_call: 5.0
    transaction_confirmation: 10.0
    bridge_call: 5.0

  # Rate Limiting (disabled for tests)
  rate_limiting:
    rpc_calls_per_second: 1000.0
    burst_size: 1000

  # Idempotency TTL (very short for tests)
  idempotency:
    financial_operations: 1
    security_operations: 1
    query_operations: 1

# Health Checks
health:
  port: 7793
  check_interval: 30

# Metrics
metrics:
  port: 7792
  enabled: true

# Redis
redis:
  host: "lumiere-test-redis"
  port: 6379
  db: 2
  socket_timeout: 5.0
  socket_connect_timeout: 5.0
